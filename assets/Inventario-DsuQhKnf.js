import{r as s,I as D,u as g,a as E,j as e,b as A,D as y}from"./index-69AZbl_O.js";import{N as P,H as k}from"./Nav-DG8Aara-.js";const F="_Article_Inventario_19bjx_5",R="_SubContainer_19bjx_13",U="_EditContainer_19bjx_26",w="_DivSubcontainer_19bjx_38",T="_Edit_Main_Info_19bjx_50",L="_DivInput_Edit_Inv_19bjx_67",M="_DivOpt_19bjx_94",d={Article_Inventario:F,SubContainer:R,EditContainer:U,DivSubcontainer:w,Edit_Main_Info:T,DivInput_Edit_Inv:L,DivOpt:M};function O(){const{isValidInv:f,SetisValidInv:h,ProductID:a,SetProductoID:j}=s.useContext(D),[v,u]=s.useState(""),[c,o]=s.useState(0),[S,m]=s.useState("unidad"),[r,_]=s.useState(""),[i,p]=s.useState(""),[I,x]=s.useState(0),b=g(t=>t.Inventario.DataInventario),n=E();s.useEffect(()=>{const t=b.find(N=>N.id===a);t&&(u(t.nombre),o(t.stock),m(t.unidad),_(t.img),p(t.descripcion),x(t.precio))},[a,b]);function l(){if(!v||!i||!r||c<0||I<0){alert("Todos los campos deben completarse correctamente.");return}n(A({id:a,nombre:v,precio:I,descripcion:i,stock:c,unidad:S,img:r})),alert("Producto actualizado exitosamente"),h(!1),j(null)}return f?e.jsx("div",{className:d.EditContainer,children:e.jsxs("div",{className:d.DivSubcontainer,children:[e.jsx("h2",{children:"Editar Artículo"}),e.jsxs("div",{className:d.Edit_Main_Info,children:[e.jsx("label",{children:"Nombre del Artículo"}),e.jsx("input",{type:"text",value:v,onChange:t=>u(t.target.value)}),e.jsxs("div",{className:d.DivInput_Edit_Inv,children:[e.jsxs("div",{children:[e.jsx("label",{children:"Cantidad"}),e.jsx("input",{type:"number",value:c,min:"0",onChange:t=>o(parseInt(t.target.value,10))})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Precio"}),e.jsx("input",{type:"number",value:I,min:"0",step:"0.01",onChange:t=>x(parseFloat(t.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Unidad"}),e.jsxs("select",{value:S,onChange:t=>m(t.target.value),children:[e.jsx("option",{value:"unidad",children:"Unidad"}),e.jsx("option",{value:"litros",children:"Litros"})]})]})]}),e.jsx("label",{children:"Descripción"}),e.jsx("input",{type:"text",value:i,onChange:t=>p(t.target.value)}),e.jsx("label",{children:"URL de la Imagen"}),e.jsx("input",{type:"text",value:r,onChange:t=>_(t.target.value)})]}),e.jsxs("div",{className:d.DivOpt,children:[e.jsx("button",{onClick:()=>h(!1),children:"Cancelar"}),e.jsx("button",{onClick:l,children:"Guardar"})]})]})}):null}const V="_InvContainer_menu5_7",H="_SearchDiv_menu5_23",q="_Emp_Table_Container_menu5_75",z="_DivAcctiones_menu5_128",C={InvContainer:V,SearchDiv:H,Emp_Table_Container:q,DivAcctiones:z};function B(f){const h=E(),a=g(n=>n.Inventario.DataInventario),j=g(n=>n.empleadosinfo.UserData),{ProductID:v,SetProductoID:u}=s.useContext(D),[c,o]=s.useState(a),[S,m]=s.useState(a),[r,_]=s.useState(""),[i,p]=s.useState(""),{isValidInv:I,SetisValidInv:x}=s.useContext(D);s.useEffect(()=>{o(a),m(a)},[a]),s.useEffect(()=>{p(j.Role)},[j]),s.useEffect(()=>{if(r==""){o(a);return}const n=a.filter(l=>l.nombre.toLowerCase(r).trim().startsWith(r.toLowerCase().trim()));o(n)},[r]);function b(n){h(y(n));let l=a.filter(t=>t.id!==n);o(l)}return e.jsxs("aside",{className:C.InvContainer,children:[e.jsxs("div",{className:C.SearchDiv,children:[e.jsx("input",{type:"text",placeholder:"Buscar Producto...",onChange:n=>{_(n.target.value)}}),e.jsxs("div",{children:[e.jsx("h2",{children:"Estado del Inventarios"}),i&&i=="owner"||i=="Admin"?e.jsx(e.Fragment,{children:e.jsxs("button",{onClick:n=>{x(!0),u("")},children:[e.jsx("i",{className:"fa-solid fa-plus"}),"Agregar Producto"]})}):e.jsx(e.Fragment,{})]})]}),e.jsx("div",{className:C.Emp_Table_Container,children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Imagen"}),e.jsx("th",{children:"Articulo"}),e.jsx("th",{children:"Cantidad"}),e.jsx("th",{children:"Unidad"}),e.jsx("th",{children:"Precio"}),i&&i=="owner"||i=="Admin"?e.jsx("th",{children:"Acciones"}):e.jsx(e.Fragment,{})]})}),e.jsx("tbody",{children:c&&c.length>0?e.jsx(e.Fragment,{children:c.map((n,l)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("img",{src:n.img,alt:""})}),e.jsx("td",{children:n.nombre}),e.jsx("td",{children:n.stock}),e.jsx("td",{children:n.unidad}),e.jsx("td",{children:n.precio}),i&&i=="owner"||i=="Admin"?e.jsx("td",{children:e.jsxs("div",{className:C.DivAcctiones,children:[e.jsx("button",{onClick:t=>{x(!0),u(n.id)},children:e.jsx("i",{className:"fa-solid fa-pen-to-square"})}),e.jsx("button",{onClick:t=>{b(n.id)},children:e.jsx("i",{className:"fa-solid fa-trash"})})]})}):e.jsx(e.Fragment,{})]},l))}):e.jsx(e.Fragment,{children:e.jsx("tr",{children:e.jsx("td",{colSpan:9,children:"No hay productos en el inventario"})})})})]})})]})}function $(f){return e.jsxs("article",{className:d.Article_Inventario,children:[e.jsx(P,{}),e.jsx(O,{}),e.jsxs("div",{className:d.SubContainer,children:[e.jsx(k,{}),e.jsx(B,{})]})]})}export{$ as default};
